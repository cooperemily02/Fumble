{"ast":null,"code":"'use strict';\n\nconst Aspect = require('./operation').Aspect;\n\nconst defineAspects = require('./operation').defineAspects;\n\nconst CommandOperationV2 = require('./command_v2');\n\nconst serverType = require('../core/sdam/common').serverType;\n\nconst ServerType = require('../core/sdam/common').ServerType;\n\nconst MongoError = require('../core').MongoError;\n\nclass ReIndexOperation extends CommandOperationV2 {\n  constructor(collection, options) {\n    super(collection, options);\n    this.collectionName = collection.collectionName;\n  }\n\n  execute(server, callback) {\n    if (serverType(server) !== ServerType.Standalone) {\n      callback(new MongoError(`reIndex can only be executed on standalone servers.`));\n      return;\n    }\n\n    super.executeCommand(server, {\n      reIndex: this.collectionName\n    }, (err, result) => {\n      if (err) {\n        callback(err);\n        return;\n      }\n\n      callback(null, !!result.ok);\n    });\n  }\n\n}\n\ndefineAspects(ReIndexOperation, [Aspect.EXECUTE_WITH_SELECTION]);\nmodule.exports = ReIndexOperation;","map":null,"metadata":{},"sourceType":"script"}