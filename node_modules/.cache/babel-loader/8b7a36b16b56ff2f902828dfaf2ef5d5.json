{"ast":null,"code":"/* global WebKitCSSMatrix */\nconst React = require('react');\n\nconst sleep = require('p-sleep');\n\nconst settings = {\n  snapBackDuration: 300,\n  maxTilt: 5,\n  bouncePower: 0.2,\n  swipeThreshold: 300 // px/s\n\n};\n\nconst getElementSize = element => {\n  const elementStyles = window.getComputedStyle(element);\n  const widthString = elementStyles.getPropertyValue('width');\n  const width = Number(widthString.split('px')[0]);\n  const heightString = elementStyles.getPropertyValue('height');\n  const height = Number(heightString.split('px')[0]);\n  return {\n    x: width,\n    y: height\n  };\n};\n\nconst pythagoras = (x, y) => {\n  return Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));\n};\n\nconst animateOut = async (element, speed, easeIn = false) => {\n  const startPos = getTranslate(element);\n  const bodySize = getElementSize(document.body);\n  const diagonal = pythagoras(bodySize.x, bodySize.y);\n  const velocity = pythagoras(speed.x, speed.y);\n  const time = diagonal / velocity;\n  const multiplier = diagonal / velocity;\n  const translateString = translationString(speed.x * multiplier + startPos.x, -speed.y * multiplier + startPos.y);\n  let rotateString = '';\n  const rotationPower = 200;\n\n  if (easeIn) {\n    element.style.transition = 'ease ' + time + 's';\n  } else {\n    element.style.transition = 'ease-out ' + time + 's';\n  }\n\n  if (getRotation(element) === 0) {\n    rotateString = rotationString((Math.random() - 0.5) * rotationPower);\n  } else if (getRotation(element) > 0) {\n    rotateString = rotationString(Math.random() * rotationPower / 2 + getRotation(element));\n  } else {\n    rotateString = rotationString((Math.random() - 1) * rotationPower / 2 + getRotation(element));\n  }\n\n  element.style.transform = translateString + rotateString;\n  await sleep(time * 1000);\n};\n\nconst animateBack = element => {\n  element.style.transition = settings.snapBackDuration + 'ms';\n  const startingPoint = getTranslate(element);\n  const translation = translationString(startingPoint.x * -settings.bouncePower, startingPoint.y * -settings.bouncePower);\n  const rotation = rotationString(getRotation(element) * -settings.bouncePower);\n  element.style.transform = translation + rotation;\n  setTimeout(() => {\n    element.style.transform = 'none';\n  }, settings.snapBackDuration * 0.75);\n  setTimeout(() => {\n    element.style.transition = '10ms';\n  }, settings.snapBackDuration);\n};\n\nconst getSwipeDirection = speed => {\n  if (Math.abs(speed.x) > Math.abs(speed.y)) {\n    return speed.x > 0 ? 'right' : 'left';\n  } else {\n    return speed.y > 0 ? 'up' : 'down';\n  }\n};\n\nconst calcSpeed = (oldLocation, newLocation) => {\n  const dx = newLocation.x - oldLocation.x;\n  const dy = oldLocation.y - newLocation.y;\n  const dt = (newLocation.time - oldLocation.time) / 1000;\n  return {\n    x: dx / dt,\n    y: dy / dt\n  };\n};\n\nconst translationString = (x, y) => {\n  const translation = 'translate(' + x + 'px, ' + y + 'px)';\n  return translation;\n};\n\nconst rotationString = rot => {\n  const rotation = 'rotate(' + rot + 'deg)';\n  return rotation;\n};\n\nconst getTranslate = element => {\n  const style = window.getComputedStyle(element);\n  const matrix = new WebKitCSSMatrix(style.webkitTransform);\n  const ans = {\n    x: matrix.m41,\n    y: matrix.m42\n  };\n  return ans;\n};\n\nconst getRotation = element => {\n  const style = window.getComputedStyle(element);\n  const matrix = new WebKitCSSMatrix(style.webkitTransform);\n  const ans = -Math.asin(matrix.m21) / (2 * Math.PI) * 360;\n  return ans;\n};\n\nconst dragableTouchmove = (coordinates, element, offset, lastLocation) => {\n  const pos = {\n    x: coordinates.x + offset.x,\n    y: coordinates.y + offset.y\n  };\n  const newLocation = {\n    x: pos.x,\n    y: pos.y,\n    time: new Date().getTime()\n  };\n  const translation = translationString(pos.x, pos.y);\n  const rotCalc = calcSpeed(lastLocation, newLocation).x / 1000;\n  const rotation = rotationString(rotCalc * settings.maxTilt);\n  element.style.transform = translation + rotation;\n  return newLocation;\n};\n\nconst touchCoordinatesFromEvent = e => {\n  const touchLocation = e.targetTouches[0];\n  return {\n    x: touchLocation.clientX,\n    y: touchLocation.clientY\n  };\n};\n\nconst mouseCoordinatesFromEvent = e => {\n  return {\n    x: e.clientX,\n    y: e.clientY\n  };\n};\n\nconst TinderCard = React.forwardRef(({\n  flickOnSwipe = true,\n  children,\n  onSwipe,\n  onCardLeftScreen,\n  className,\n  preventSwipe = []\n}, ref) => {\n  const swipeAlreadyReleased = React.useRef(false);\n  const element = React.useRef();\n  React.useImperativeHandle(ref, () => ({\n    async swipe(dir = 'right') {\n      if (onSwipe) onSwipe(dir);\n      const power = 1000;\n      const disturbance = (Math.random() - 0.5) * 100;\n\n      if (dir === 'right') {\n        await animateOut(element.current, {\n          x: power,\n          y: disturbance\n        }, true);\n      } else if (dir === 'left') {\n        await animateOut(element.current, {\n          x: -power,\n          y: disturbance\n        }, true);\n      } // } else if (dir === 'up') {\n      //   await animateBack(element.current)\n      // } else if (dir === 'down') {\n      //   await animateOut(element.current, { x: disturbance, y: -power }, true)\n      // }\n\n\n      element.current.style.display = 'none';\n      if (onCardLeftScreen) onCardLeftScreen(dir);\n    }\n\n  }));\n  const handleSwipeReleased = React.useCallback(async (element, speed) => {\n    if (swipeAlreadyReleased.current) {\n      return;\n    }\n\n    swipeAlreadyReleased.current = true; // Check if this is a swipe\n\n    if (Math.abs(speed.x) > settings.swipeThreshold || Math.abs(speed.y) > settings.swipeThreshold) {\n      const dir = getSwipeDirection(speed);\n      if (onSwipe) onSwipe(dir);\n\n      if (flickOnSwipe) {\n        if (!preventSwipe.includes(dir)) {\n          await animateOut(element, speed);\n          element.style.display = 'none';\n          if (onCardLeftScreen) onCardLeftScreen(dir);\n          return;\n        }\n      }\n    } // Card was not flicked away, animate back to start\n\n\n    animateBack(element);\n  }, [swipeAlreadyReleased, flickOnSwipe, onSwipe, onCardLeftScreen, preventSwipe]);\n  const handleSwipeStart = React.useCallback(() => {\n    swipeAlreadyReleased.current = false;\n  }, [swipeAlreadyReleased]);\n  React.useLayoutEffect(() => {\n    let offset = {\n      x: null,\n      y: null\n    };\n    let speed = {\n      x: 0,\n      y: 0\n    };\n    let lastLocation = {\n      x: 0,\n      y: 0,\n      time: new Date().getTime()\n    };\n    let mouseIsClicked = false;\n    element.current.addEventListener('touchstart', ev => {\n      ev.preventDefault();\n      handleSwipeStart();\n      offset = {\n        x: -touchCoordinatesFromEvent(ev).x,\n        y: -touchCoordinatesFromEvent(ev).y\n      };\n    });\n    element.current.addEventListener('mousedown', ev => {\n      ev.preventDefault();\n      mouseIsClicked = true;\n      handleSwipeStart();\n      offset = {\n        x: -mouseCoordinatesFromEvent(ev).x,\n        y: -mouseCoordinatesFromEvent(ev).y\n      };\n    });\n    element.current.addEventListener('touchmove', ev => {\n      ev.preventDefault();\n      const newLocation = dragableTouchmove(touchCoordinatesFromEvent(ev), element.current, offset, lastLocation);\n      speed = calcSpeed(lastLocation, newLocation);\n      lastLocation = newLocation;\n    });\n    element.current.addEventListener('mousemove', ev => {\n      ev.preventDefault();\n\n      if (mouseIsClicked) {\n        const newLocation = dragableTouchmove(mouseCoordinatesFromEvent(ev), element.current, offset, lastLocation);\n        speed = calcSpeed(lastLocation, newLocation);\n        lastLocation = newLocation;\n      }\n    });\n    element.current.addEventListener('touchend', ev => {\n      ev.preventDefault();\n      handleSwipeReleased(element.current, speed);\n    });\n    element.current.addEventListener('mouseup', ev => {\n      if (mouseIsClicked) {\n        ev.preventDefault();\n        mouseIsClicked = false;\n        handleSwipeReleased(element.current, speed);\n      }\n    });\n    element.current.addEventListener('mouseleave', ev => {\n      if (mouseIsClicked) {\n        ev.preventDefault();\n        mouseIsClicked = false;\n        handleSwipeReleased(element.current, speed);\n      }\n    });\n  }, []);\n  return React.createElement('div', {\n    ref: element,\n    className\n  }, children);\n});\nmodule.exports = TinderCard;","map":{"version":3,"sources":["/Users/aramaswamy/Desktop/Fumble/node_modules/react-tinder-card/index.js"],"names":["React","require","sleep","settings","snapBackDuration","maxTilt","bouncePower","swipeThreshold","getElementSize","element","elementStyles","window","getComputedStyle","widthString","getPropertyValue","width","Number","split","heightString","height","x","y","pythagoras","Math","sqrt","pow","animateOut","speed","easeIn","startPos","getTranslate","bodySize","document","body","diagonal","velocity","time","multiplier","translateString","translationString","rotateString","rotationPower","style","transition","getRotation","rotationString","random","transform","animateBack","startingPoint","translation","rotation","setTimeout","getSwipeDirection","abs","calcSpeed","oldLocation","newLocation","dx","dy","dt","rot","matrix","WebKitCSSMatrix","webkitTransform","ans","m41","m42","asin","m21","PI","dragableTouchmove","coordinates","offset","lastLocation","pos","Date","getTime","rotCalc","touchCoordinatesFromEvent","e","touchLocation","targetTouches","clientX","clientY","mouseCoordinatesFromEvent","TinderCard","forwardRef","flickOnSwipe","children","onSwipe","onCardLeftScreen","className","preventSwipe","ref","swipeAlreadyReleased","useRef","useImperativeHandle","swipe","dir","power","disturbance","current","display","handleSwipeReleased","useCallback","includes","handleSwipeStart","useLayoutEffect","mouseIsClicked","addEventListener","ev","preventDefault","createElement","module","exports"],"mappings":"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","sourcesContent":["/* global WebKitCSSMatrix */\n\nconst React = require('react')\nconst sleep = require('p-sleep')\n\nconst settings = {\n  snapBackDuration: 300,\n  maxTilt: 5,\n  bouncePower: 0.2,\n  swipeThreshold: 300 // px/s\n}\n\nconst getElementSize = (element) => {\n  const elementStyles = window.getComputedStyle(element)\n  const widthString = elementStyles.getPropertyValue('width')\n  const width = Number(widthString.split('px')[0])\n  const heightString = elementStyles.getPropertyValue('height')\n  const height = Number(heightString.split('px')[0])\n  return { x: width, y: height }\n}\n\nconst pythagoras = (x, y) => {\n  return Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2))\n}\n\nconst animateOut = async (element, speed, easeIn = false) => {\n  const startPos = getTranslate(element)\n  const bodySize = getElementSize(document.body)\n  const diagonal = pythagoras(bodySize.x, bodySize.y)\n\n  const velocity = pythagoras(speed.x, speed.y)\n  const time = diagonal / velocity\n  const multiplier = diagonal / velocity\n\n  const translateString = translationString(speed.x * multiplier + startPos.x, -speed.y * multiplier + startPos.y)\n  let rotateString = ''\n\n  const rotationPower = 200\n\n  if (easeIn) {\n    element.style.transition = 'ease ' + time + 's'\n  } else {\n    element.style.transition = 'ease-out ' + time + 's'\n  }\n\n  if (getRotation(element) === 0) {\n    rotateString = rotationString((Math.random() - 0.5) * rotationPower)\n  } else if (getRotation(element) > 0) {\n    rotateString = rotationString((Math.random()) * rotationPower / 2 + getRotation(element))\n  } else {\n    rotateString = rotationString((Math.random() - 1) * rotationPower / 2 + getRotation(element))\n  }\n\n  element.style.transform = translateString + rotateString\n\n  await sleep(time * 1000)\n}\n\nconst animateBack = (element) => {\n  element.style.transition = settings.snapBackDuration + 'ms'\n  const startingPoint = getTranslate(element)\n  const translation = translationString(startingPoint.x * -settings.bouncePower, startingPoint.y * -settings.bouncePower)\n  const rotation = rotationString(getRotation(element) * -settings.bouncePower)\n  element.style.transform = translation + rotation\n\n  setTimeout(() => {\n    element.style.transform = 'none'\n  }, settings.snapBackDuration * 0.75)\n\n  setTimeout(() => {\n    element.style.transition = '10ms'\n  }, settings.snapBackDuration)\n}\n\nconst getSwipeDirection = (speed) => {\n  if (Math.abs(speed.x) > Math.abs(speed.y)) {\n    return (speed.x > 0) ? 'right' : 'left'\n  } else {\n    return (speed.y > 0) ? 'up' : 'down'\n  }\n}\n\nconst calcSpeed = (oldLocation, newLocation) => {\n  const dx = newLocation.x - oldLocation.x\n  const dy = oldLocation.y - newLocation.y\n  const dt = (newLocation.time - oldLocation.time) / 1000\n  return { x: dx / dt, y: dy / dt }\n}\n\nconst translationString = (x, y) => {\n  const translation = 'translate(' + x + 'px, ' + y + 'px)'\n  return translation\n}\n\nconst rotationString = (rot) => {\n  const rotation = 'rotate(' + rot + 'deg)'\n  return rotation\n}\n\nconst getTranslate = (element) => {\n  const style = window.getComputedStyle(element)\n  const matrix = new WebKitCSSMatrix(style.webkitTransform)\n  const ans = { x: matrix.m41, y: matrix.m42 }\n  return ans\n}\n\nconst getRotation = (element) => {\n  const style = window.getComputedStyle(element)\n  const matrix = new WebKitCSSMatrix(style.webkitTransform)\n  const ans = -Math.asin(matrix.m21) / (2 * Math.PI) * 360\n  return ans\n}\n\nconst dragableTouchmove = (coordinates, element, offset, lastLocation) => {\n  const pos = { x: coordinates.x + offset.x, y: coordinates.y + offset.y }\n  const newLocation = { x: pos.x, y: pos.y, time: new Date().getTime() }\n  const translation = translationString(pos.x, pos.y)\n  const rotCalc = calcSpeed(lastLocation, newLocation).x / 1000\n  const rotation = rotationString(rotCalc * settings.maxTilt)\n  element.style.transform = translation + rotation\n  return newLocation\n}\n\nconst touchCoordinatesFromEvent = (e) => {\n  const touchLocation = e.targetTouches[0]\n  return { x: touchLocation.clientX, y: touchLocation.clientY }\n}\n\nconst mouseCoordinatesFromEvent = (e) => {\n  return { x: e.clientX, y: e.clientY }\n}\n\nconst TinderCard = React.forwardRef(({ flickOnSwipe = true, children, onSwipe, onCardLeftScreen, className, preventSwipe = [] }, ref) => {\n  const swipeAlreadyReleased = React.useRef(false)\n\n  const element = React.useRef()\n\n  React.useImperativeHandle(ref, () => ({\n    async swipe (dir = 'right') {\n      if (onSwipe) onSwipe(dir)\n      const power = 1000\n      const disturbance = (Math.random() - 0.5) * 100\n      if (dir === 'right') {\n        await animateOut(element.current, { x: power, y: disturbance }, true)\n      } else if (dir === 'left') {\n        await animateOut(element.current, { x: -power, y: disturbance }, true)}\n      // } else if (dir === 'up') {\n      //   await animateBack(element.current)\n      // } else if (dir === 'down') {\n      //   await animateOut(element.current, { x: disturbance, y: -power }, true)\n      // }\n      element.current.style.display = 'none'\n      if (onCardLeftScreen) onCardLeftScreen(dir)\n    }\n  }))\n\n  const handleSwipeReleased = React.useCallback(async (element, speed) => {\n    if (swipeAlreadyReleased.current) { return }\n    swipeAlreadyReleased.current = true\n\n    // Check if this is a swipe\n    if (Math.abs(speed.x) > settings.swipeThreshold || Math.abs(speed.y) > settings.swipeThreshold) {\n      const dir = getSwipeDirection(speed)\n\n      if (onSwipe) onSwipe(dir)\n\n      if (flickOnSwipe) {\n        if (!preventSwipe.includes(dir)) {\n          await animateOut(element, speed)\n          element.style.display = 'none'\n          if (onCardLeftScreen) onCardLeftScreen(dir)\n          return\n        }\n      }\n    }\n\n    // Card was not flicked away, animate back to start\n    animateBack(element)\n  }, [swipeAlreadyReleased, flickOnSwipe, onSwipe, onCardLeftScreen, preventSwipe])\n\n  const handleSwipeStart = React.useCallback(() => {\n    swipeAlreadyReleased.current = false\n  }, [swipeAlreadyReleased])\n\n  React.useLayoutEffect(() => {\n    let offset = { x: null, y: null }\n    let speed = { x: 0, y: 0 }\n    let lastLocation = { x: 0, y: 0, time: new Date().getTime() }\n    let mouseIsClicked = false\n\n    element.current.addEventListener(('touchstart'), (ev) => {\n      ev.preventDefault()\n      handleSwipeStart()\n      offset = { x: -touchCoordinatesFromEvent(ev).x, y: -touchCoordinatesFromEvent(ev).y }\n    })\n\n    element.current.addEventListener(('mousedown'), (ev) => {\n      ev.preventDefault()\n      mouseIsClicked = true\n      handleSwipeStart()\n      offset = { x: -mouseCoordinatesFromEvent(ev).x, y: -mouseCoordinatesFromEvent(ev).y }\n    })\n\n    element.current.addEventListener(('touchmove'), (ev) => {\n      ev.preventDefault()\n      const newLocation = dragableTouchmove(touchCoordinatesFromEvent(ev), element.current, offset, lastLocation)\n      speed = calcSpeed(lastLocation, newLocation)\n      lastLocation = newLocation\n    })\n\n    element.current.addEventListener(('mousemove'), (ev) => {\n      ev.preventDefault()\n      if (mouseIsClicked) {\n        const newLocation = dragableTouchmove(mouseCoordinatesFromEvent(ev), element.current, offset, lastLocation)\n        speed = calcSpeed(lastLocation, newLocation)\n        lastLocation = newLocation\n      }\n    })\n\n    element.current.addEventListener(('touchend'), (ev) => {\n      ev.preventDefault()\n      handleSwipeReleased(element.current, speed)\n    })\n\n    element.current.addEventListener(('mouseup'), (ev) => {\n      if (mouseIsClicked) {\n        ev.preventDefault()\n        mouseIsClicked = false\n        handleSwipeReleased(element.current, speed)\n      }\n    })\n\n    element.current.addEventListener(('mouseleave'), (ev) => {\n      if (mouseIsClicked) {\n        ev.preventDefault()\n        mouseIsClicked = false\n        handleSwipeReleased(element.current, speed)\n      }\n    })\n  }, [])\n\n  return (\n    React.createElement('div', { ref: element, className }, children)\n  )\n})\n\nmodule.exports = TinderCard\n"]},"metadata":{},"sourceType":"script"}