{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _value = require('./value');\n\nvar _value2 = _interopRequireDefault(_value);\n\nvar _composite = require('./composite');\n\nvar _composite2 = _interopRequireDefault(_composite);\n\nvar _parallel = require('./parallel');\n\nvar _parallel2 = _interopRequireDefault(_parallel);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction createTouches(initialTouches, _ref) {\n  var eventToTouches = _ref.eventToTouches,\n      moveEvent = _ref.moveEvent,\n      props = _objectWithoutProperties(_ref, ['eventToTouches', 'moveEvent']);\n\n  var touches = (0, _parallel2.default)(mapCoordsToActions(initialTouches), _extends({\n    preventDefault: true\n  }, props));\n\n  function updateTouches(e) {\n    if (props.preventDefault) e.preventDefault();\n    var latestTouches = eventToTouches(e);\n    updateActionWithTouches(touches, latestTouches);\n  }\n\n  touches.setProps({\n    _onStart: function _onStart() {\n      return document.documentElement.addEventListener(moveEvent, updateTouches);\n    },\n    _onStop: function _onStop() {\n      return document.documentElement.removeEventListener(moveEvent, updateTouches);\n    }\n  });\n  return touches;\n}\n\nfunction mapCoordsToActions(coords) {\n  var actions = [];\n\n  for (var i = 0; i < coords.length; i++) {\n    var _coords$i = coords[i],\n        x = _coords$i.x,\n        y = _coords$i.y;\n    actions[i] = (0, _composite2.default)({\n      x: (0, _value2.default)(x),\n      y: (0, _value2.default)(y)\n    });\n  }\n\n  return actions;\n}\n\nfunction updateActionWithTouches(touches, newTouches) {\n  for (var i = 0; i < newTouches.length; i++) {\n    var _newTouches$i = newTouches[i],\n        x = _newTouches$i.x,\n        y = _newTouches$i.y;\n    var touchActions = touches.getChildren();\n    var touchAction = touchActions[i];\n\n    if (touchAction !== undefined) {\n      touchAction.x.set(x);\n      touchAction.y.set(y);\n    } else {\n      touches.addAction((0, _composite2.default)({\n        x: (0, _value2.default)(x),\n        y: (0, _value2.default)(y)\n      }));\n    }\n  }\n}\n\nvar mouseEventToTouches = function mouseEventToTouches(_ref2) {\n  var pageX = _ref2.pageX,\n      pageY = _ref2.pageY;\n  return [{\n    x: pageX,\n    y: pageY\n  }];\n};\n\nvar touchEventToTouches = function touchEventToTouches(_ref3) {\n  var touches = _ref3.touches;\n  return extractCoords(touches);\n};\n\nfunction extractCoords(touches) {\n  var coords = [];\n\n  for (var i = 0; i < touches.length; i++) {\n    var _touches$i = touches[i],\n        clientX = _touches$i.clientX,\n        clientY = _touches$i.clientY;\n    coords[i] = {\n      x: clientX,\n      y: clientY\n    };\n  }\n\n  return coords;\n}\n\nvar getNativeEvent = function getNativeEvent(e) {\n  return e.originalEvent || e.nativeEvent || e;\n};\n\nexports.default = function (e, props) {\n  var nativeEvent = getNativeEvent(e);\n  return nativeEvent.touches ? createTouches(touchEventToTouches(e), _extends({\n    moveEvent: 'touchmove',\n    eventToTouches: touchEventToTouches\n  }, props)) : createTouches(mouseEventToTouches(e), _extends({\n    moveEvent: 'mousemove',\n    eventToTouches: mouseEventToTouches\n  }, props));\n};","map":null,"metadata":{},"sourceType":"script"}