!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.framesync={})}(this,function(e){"use strict";var n=0,r="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(e){return window.requestAnimationFrame(e)}:function(e){var r=Date.now(),t=Math.max(0,16.7-(r-n));n=r+t,setTimeout(function(){return e(n)},t)};function t(e){var n=[],r=[],t=0,c=!1,o=0;return{cancel:function(e){var n=r.indexOf(e);-1!==n&&r.splice(n,1)},process:function(){for(c=!0,n=(e=[r,n])[0],(r=e[1]).length=0,t=n.length,o=0;o<t;o++)n[o]();var e;c=!1},schedule:function(o,a){void 0===a&&(a=!1),e();var i=a&&c,u=i?n:r;-1===u.indexOf(o)&&(u.push(o),i&&(t=n.length))}}}var c="undefined"!=typeof performance&&void 0!==performance.now?function(){return performance.now()}:function(){return Date.now()},o=!1,a=40,i=16.7,u=!0,f=0,d=0;function s(){o||(o=!0,u=!0,r(v))}var m=t(s),l=t(s),p=t(s),h=t(s);function v(e){o=!1,d=u?i:Math.max(Math.min(e-f,a),1),u||(i=d),f=e,m.process(),l.process(),p.process(),h.process(),o&&(u=!1)}var F=m.schedule,w=l.schedule,x=p.schedule,y=h.schedule,O=m.cancel,M=l.cancel,g=p.cancel,S=h.cancel;e.currentTime=c,e.onFrameStart=F,e.onFrameUpdate=w,e.onFrameRender=x,e.onFrameEnd=y,e.cancelOnFrameStart=O,e.cancelOnFrameUpdate=M,e.cancelOnFrameRender=g,e.cancelOnFrameEnd=S,e.timeSinceLastFrame=function(){return d},e.currentFrameTime=function(){return f},Object.defineProperty(e,"__esModule",{value:!0})});
